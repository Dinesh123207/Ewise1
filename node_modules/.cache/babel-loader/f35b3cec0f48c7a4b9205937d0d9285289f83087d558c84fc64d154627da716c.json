{"ast":null,"code":"var _jsxFileName = \"D:\\\\Ewise_Code\\\\Website_Chat\\\\Ewise-1\\\\src\\\\screens\\\\Notification.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport Footer from '../components/Footer';\nimport Navbar from '../components/Navbar';\nimport '../styles/PricesonMarketplace.css';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Notification() {\n  _s();\n  const form = useRef();\n  const [prices, setPrices] = useState([]);\n  const {\n    email\n  } = useParams();\n  const fetchPrices = async () => {\n    try {\n      const response = await fetch(`http://localhost:5000/api/getprices`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to fetch prices');\n      }\n      const data = await response.json();\n      setPrices(data.prices);\n    } catch (error) {\n      console.error('Error fetching prices:', error);\n    }\n  };\n  const sendEmail = async (email, type) => {\n    try {\n      const res = await axios.post('http://localhost:5001/name', {\n        name: email,\n        type: \"pickup\"\n      });\n      console.log(res);\n      console.log(\"hogaya\");\n\n      // Find the user by email in the prices array\n      const updatedPrices = prices.map(price => {\n        if (price.email === email) {\n          // Update the reward points for the specific user using immutability\n          const updatedPrice = {\n            ...price,\n            rewardPoints: (price.rewardPoints || 0) + 2,\n            sold: true\n          };\n          return updatedPrice;\n        }\n        return price;\n      });\n      setPrices(updatedPrices);\n\n      // Update rewardPoints in the database\n      await axios.post('http://localhost:5000/api/updatepoints', {\n        email,\n        points: 2\n      });\n    } catch (error) {\n      console.error(error, \"Error updating reward points\");\n    }\n    console.log(\"Sending email...\");\n  };\n  useEffect(() => {\n    fetchPrices();\n  }, [email]);\n  const handleApprove = async email => {\n    try {\n      await sendEmail(email, \"pickup\");\n    } catch (error) {\n      console.error(error, \"Error sending email\");\n    }\n  };\n  const handleReject = email => {\n    console.log(`Email to ${email} rejected.`);\n    // Perform any action needed when rejecting the email, if necessary\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Orders Received\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      ref: form,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: prices.map((price, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            // Styles for each price item\n          },\n          children: !price.sold && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: 'green',\n                fontSize: \"25px\"\n              },\n              children: \"Item Available\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleApprove(price.email),\n                style: {\n                  color: \"black\",\n                  fontSize: \"20px\",\n                  marginRight: \"10px\"\n                },\n                children: \"Yes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleReject(price.email),\n                style: {\n                  color: \"black\",\n                  fontSize: \"20px\"\n                },\n                children: \"No\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: price.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, price._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n_s(Notification, \"pE3ldbnJMNWoBN7MzGTsFrqRusg=\", false, function () {\n  return [useParams];\n});\n_c = Notification;\nvar _c;\n$RefreshReg$(_c, \"Notification\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Footer","Navbar","useParams","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Notification","_s","form","prices","setPrices","email","fetchPrices","response","fetch","method","headers","ok","Error","data","json","error","console","sendEmail","type","res","post","name","log","updatedPrices","map","price","updatedPrice","rewardPoints","sold","points","handleApprove","handleReject","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","className","index","style","color","fontSize","onClick","marginRight","_id","_c","$RefreshReg$"],"sources":["D:/Ewise_Code/Website_Chat/Ewise-1/src/screens/Notification.js"],"sourcesContent":["import React, { useEffect, useRef, useState }  from 'react';\r\nimport Footer from '../components/Footer';\r\nimport Navbar from '../components/Navbar';\r\nimport '../styles/PricesonMarketplace.css'; \r\nimport { useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nexport default function Notification() {\r\n    const form = useRef();\r\n\r\n  const [prices, setPrices] = useState([]);\r\n  const { email } = useParams();\r\n\r\n  const fetchPrices = async () => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/api/getprices`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n  \r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch prices');\r\n      }\r\n  \r\n      const data = await response.json();\r\n      setPrices(data.prices);\r\n    } catch (error) {\r\n      console.error('Error fetching prices:', error);\r\n    }\r\n  };\r\n  \r\n  const sendEmail = async (email, type) => {\r\n    try {\r\n      const res = await axios.post('http://localhost:5001/name', { name: email, type: \"pickup\" });\r\n      console.log(res);\r\n      console.log(\"hogaya\");\r\n  \r\n      // Find the user by email in the prices array\r\n      const updatedPrices = prices.map((price) => {\r\n        if (price.email === email) {\r\n          // Update the reward points for the specific user using immutability\r\n          const updatedPrice = { ...price, rewardPoints: (price.rewardPoints || 0) + 2, sold: true };\r\n          return updatedPrice;\r\n        }\r\n        return price;\r\n      });\r\n      setPrices(updatedPrices);\r\n\r\n      // Update rewardPoints in the database\r\n      await axios.post('http://localhost:5000/api/updatepoints', {\r\n        email,\r\n        points: 2,\r\n      });\r\n  \r\n    } catch (error) {\r\n      console.error(error, \"Error updating reward points\");\r\n    }\r\n    console.log(\"Sending email...\");\r\n  };\r\n  \r\n\r\n  useEffect(() => {\r\n    fetchPrices();\r\n  }, [email]);\r\n\r\n  const handleApprove = async (email) => {\r\n    try {\r\n      await sendEmail(email, \"pickup\");\r\n    } catch (error) {\r\n      console.error(error, \"Error sending email\");\r\n    }\r\n  };\r\n\r\n  const handleReject = (email) => {\r\n    console.log(`Email to ${email} rejected.`);\r\n    // Perform any action needed when rejecting the email, if necessary\r\n  };\r\n  return (\r\n    <div>\r\n      <div>\r\n        <Navbar />\r\n      </div>\r\n\r\n      <h1>Orders Received</h1>\r\n\r\n      <form ref={form}>\r\n        <div className=\"container\">\r\n          {prices.map((price, index) => (\r\n            <div\r\n              key={price._id}\r\n              style={{\r\n                // Styles for each price item\r\n              }}\r\n            >\r\n              {/* Displaying price details */}\r\n\r\n              {!price.sold && (\r\n                <>\r\n                  <p style={{ color: 'green', fontSize: \"25px\" }}>Item Available</p>\r\n                  {/* Approve and Reject buttons */}\r\n                  <div>\r\n                    <button\r\n                      onClick={() => handleApprove(price.email)}\r\n                      style={{ color: \"black\", fontSize: \"20px\", marginRight: \"10px\" }}\r\n                    >\r\n                      Yes\r\n                    </button>\r\n\r\n                    <button\r\n                      onClick={() => handleReject(price.email)}\r\n                      style={{ color: \"black\", fontSize: \"20px\" }}\r\n                    >\r\n                      No\r\n                    </button>\r\n                    <div>\r\n                        {price.email}\r\n                    </div>\r\n                  </div>\r\n                </>\r\n              )}\r\n\r\n              {/* Display reward points and sold status */}\r\n              {/* ... */}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </form>\r\n\r\n      <div>\r\n        <Footer />\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}